---
title: 线上代码调试解决方案
date: 2016-04-21 22:43:25
tag: proxy, charles, browser-sync
---
在工作中，上线会出现各种莫名bug（线上环境出现的bug，代码出现bug，上线代码于本地代码不一致）导致上线后修复bug效率极低。一直在想一个调试线上代码的解决方案。
<!-- more -->
## 工作环境
mac os

## 使用的工具
 * Charles 是在 Mac 下常用的网络封包截取工具。

## 开始
<img src="http://7xv9xo.com1.z0.glb.clouddn.com/charles.png?imageslim" class="full-image" />
1. 打开recording。
2. 菜单栏中 Proxy 勾选 macOS proxy
3. 菜单栏中 Proxy>Recording Setting 中 Include 设置白名单， Exclude 设置黑名单
2. 在浏览器中设置charles的代理地址127.0.0.1
打开浏览器访问任意网站，请求信息都会被获取到。但在这个软件中，我们不仅仅可以获取到请求信息，我们还可设置请求响应断点，修改请求响应的数学，把请求的文件，映射成本定文件或远程文件，等。

### 设置请求响应断点
1. 打开菜单栏中 Proxy > Breakpoints Settings > [勾选]Enable Breakpoints > add。 如下图设置。
2. 打开Enable Breakpoints
<img src="http://7xv9xo.com1.z0.glb.clouddn.com/proxy1-2.png?imageslim" class="full-image" />
3. 访问设置的地址，进入如下图界面，可以设置一些信息
<img src="http://7xv9xo.com1.z0.glb.clouddn.com/proxy1-3.png?imageslim" class="full-image" />

### 映射成本定文件
1. 菜单栏中 Tools > Map Local > add
<img src="http://7xv9xo.com1.z0.glb.clouddn.com/proxy1-4.png?imageslim" class="full-image" />

### 远程地址文件或接口
1. 菜单栏中 Tools > Map remote > add
1. 菜单栏中 Tools > Map Local > add
<img src="http://7xv9xo.com1.z0.glb.clouddn.com/proxy1-5.png?imageslim" class="full-image" />

### 结语
Charles 这款软件非常强大，我就用了这款软件的很少的功能，还有更多的功能等着去发现。
