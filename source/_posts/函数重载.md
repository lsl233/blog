---
title: 函数重载
date: 2017-07-9 16:10:37
tags: JavaScript
---
<!-- more -->
`ECMAscript`函数没有传统意义上的函数重载， 比如在`Java`中可以为一个函数编写两个定义，只要这两个定义的签名（接受的参数的类型和数量）不同即可。但是在`ECMAScript`中定义两个函数名相同的函数，则最后的函数会覆盖之前的同名函数。
```JavaScript
function add(a) {
  return a;
}
function add(a, b) {
  return a + b;
}

add(1); // 返回 NaN，调用的第二个函数。
```

在`ECMAScript`中，可以模拟实现函数重载，即通过检查传入参数的类型和数量作出不同反应。
```JavaScript
function add() {
  if (arguments.length === 1) {
    return arguments[0];
  } else if (arguments.length === 2) {
    return arguments[0] + arguments[1];
  }
}
add(1);	// 1
add(1, 2);	// 3
```
但是在`ESMAScript2015`中已经不推荐使用`arguments`，但是可以使用`rest`参数
```JavaScript
function add(...value) {
  console.log(value.length);
  // to do ...
}
add(1);	// 1
add(1, 2);	// 3
```
虽然这样可以模拟实现函数重载，但是如果有多种情况下，就会写多个`if`  `else`会非常臃肿
创建一个对象，将多个同样名称whatever方法添加到改对象，每个函数的参数不同。通过这样的方法，每个重载都创建了一个独立的匿名函数。
```JavaScript
var ninja = {};
function addMethod(object, name, fn) {
  var old = object[name];
  object[name] = function() {
    if (fn.length === arguments.length) {
      return fn.apply(this, arguments);
    } else if (typeof old === 'function') {
      return old.apply(this, arguments);
    }
  }
}
addMethod(ninja, 'whatever', function () {
  console.log('没有参数');
});
addMethod(ninja, 'whatever', function (a) {
  console.log('有一个参数', a);
});
addMethod(ninja, 'whatever', function (a, b) {
  console.log('有两个参数', a, b);
});
ninja.whatever(); // 没有参数
ninja.whatever(1); // 有一个参数1
ninja.whatever(2, 3); // 有两个参数2,3
```

比心ld